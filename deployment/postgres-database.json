{
  "PostgresDatabase": {
    "Type": "AWS::RDS::DBInstance",
    "Properties": {
      "Engine": "postgres",
      "DBName": {
        "Ref": "DBName"
      },
      "MultiAZ": {
        "Ref": "MultiAZDatabase"
      },
      "MasterUsername": {
        "Ref": "DBUser"
      },
      "MasterUserPassword": {
        "Ref": "DBPassword"
      },
      "DBInstanceClass": {
        "Ref": "DBInstanceClass"
      },
      "AllocatedStorage": {
        "Ref": "DBAllocatedStorage"
      },
      "VPCSecurityGroups": {
        "Fn::If": [
          "Is-EC2-VPC",
          [
            {
              "Fn::GetAtt": [
                "DBEC2SecurityGroup",
                "GroupId"
              ]
            }
          ],
          {
            "Ref": "AWS::NoValue"
          }
        ]
      },
      "DBSecurityGroups": {
        "Fn::If": [
          "Is-EC2-Classic",
          [
            {
              "Ref": "DBSecurityGroup"
            }
          ],
          {
            "Ref": "AWS::NoValue"
          }
        ]
      }
    },
    "Metadata": {
      "AWS::CloudFormation::Designer": {
        "id": "7a6d31bc-ae62-4b6d-b42a-4a96531c62ee"
      }
    }
  }
}
